


    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Drag &amp; Zoom Image Gallery (Cargo-Ready)</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            background-color: #000000;
            color: #f3f4f6;
            overflow: hidden; 
            overscroll-behavior: none; 
            height: 100vh; 
        }

        #gallery-viewport {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            cursor: grab; 
            overflow: hidden; 
            user-select: none; 
        }
        
        #gallery-viewport::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            box-shadow: inset 0 0 100px 30px rgba(0, 0, 0, 0.7); 
            pointer-events: none; 
            z-index: 100; 
        }

        #gallery-canvas {
            position: relative; 
            transform-origin: 0 0; 
            will-change: transform; 
        }

        .poster-item {
            position: absolute; 
            width: 200px; 
            height: 300px; 
            background-color: #1f2937;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
            display: flex; 
            justify-content: center;
            align-items: center;
            user-select: none; 
        }

        .poster-item:hover {
            transform: scale(1.05); 
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
            z-index: 10; 
        }

        .poster-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            pointer-events: none; 
        }
        
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.7); 
            backdrop-filter: blur(8px); 
            -webkit-backdrop-filter: blur(8px); 
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000; 
            padding: 20px;
            box-sizing: border-box;
        }

        .modal-content {
            background-color: #374151;
            padding: 30px;
            border-radius: 16px;
            position: relative;
            max-width: 90vw; 
            width: auto;
            max-height: 90vh;
            display: flex;
            flex-direction: column; 
            align-items: center; 
            box-shadow: 0 0 70px rgba(0,0,0,0.5);
        }
        
        @media (min-width: 768px) {
            .modal-content {
                flex-direction: row;
                align-items: flex-start;
            }
        }

        .modal-image-container {
            flex-shrink: 0;
            margin-bottom: 20px;
        }
         @media (min-width: 768px) {
            .modal-image-container {
                 flex-basis: 55%;
                 margin-right: 30px;
                 margin-bottom: 0;
            }
        }

        .modal-content img {
            max-width: 100%;
            max-height: 75vh;
            object-fit: contain;
            border-radius: 12px;
            display: block;
        }
        
        .modal-description-container {
            flex-grow: 1;
            max-height: 75vh; 
            overflow-y: auto;
            padding-right: 10px;
            width: 100%;
        }
         @media (min-width: 768px) {
            .modal-description-container {
                width: auto;
            }
        }

        .modal-content p {
            font-size: 1rem; 
            color: #d1d5db;
            line-height: 1.6;
            text-align: left;
            margin: 0;
        }

        .close-button {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2.2rem;
            color: #9ca3af;
            cursor: pointer;
            transition: color 0.2s;
            z-index: 10;
        }
        .close-button:hover { color: #f3f4f6; }

        .info-text {
            position: fixed;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0,0,0,0.7);
            color: #ccc;
            padding: 8px 15px;
            border-radius: 5px;
            font-size: 0.9rem;
            z-index: 500; 
        }

    </style>


    <div id="gallery-viewport" style="cursor: grab;">
        <div id="gallery-canvas" style="transform: translate(-359.858px, -301.404px) scale(0.657873);">
            <!-- Posters (Thumbnails) will be dynamically added here -->
        </div>
    </div>

    <div class="modal-overlay" id="posterModal">
        <div class="modal-content">
            <span class="close-button" id="closeModalButton">×</span>
            <div class="modal-image-container">
                <img alt="Poster Close-up" id="modalImage" src="">
            </div>
            <div class="modal-description-container">
                 <p id="modalDescription"></p>
            </div>
        </div>
    </div>

    <div class="info-text">Click &amp; Drag to Pan | Scroll to Zoom</div>
    
    <!--<script>
        const viewport = document.getElementById('gallery-viewport');
        const canvas = document.getElementById('gallery-canvas');
        const modalOverlay = document.getElementById('posterModal');
        const modalImage = document.getElementById('modalImage');
        const modalDescription = document.getElementById('modalDescription');
        const closeModalButton = document.getElementById('closeModalButton');

        // ==============================================================================
        // === STEP 1: EDIT YOUR GALLERY CONTENT HERE ===================================
        // ==============================================================================
        // Replace the example items in this 'postersData' array with your own content.
        // - id: A unique name for your project.
        // - thumbnailSrc: The direct URL to the thumbnail image from your Cargo site.
        // - imgSrcFull: The URL to the larger image for the pop-up modal.
        // - description: The text that will appear in the modal.
        //
        // HOW TO GET YOUR IMAGE URLS FROM CARGO:
        // 1. Go to your live Cargo site.
        // 2. Right-click on the thumbnail image you want to use.
        // 3. Select "Copy Image Address" or "Copy Image Link".
        // 4. Paste that URL into the 'thumbnailSrc' field.
        // 5. Do the same for the full-size image on your project page for 'imgSrcFull'.
        // ------------------------------------------------------------------------------

        const postersData = [
            // --- EXAMPLE ITEM 1 (REPLACE THIS) ---
            {
                id: 'my-first-painting',
                thumbnailSrc: 'https://images.cargo.site/w/400/i/a1b2c3d4e5/my-thumbnail.jpg', // Replace with your URL
                imgSrcFull: 'https://images.cargo.site/w/1200/i/a1b2c3d4e5/my-fullsize-image.jpg', // Replace with your URL
                description: 'Title of My First Painting. Oil on canvas, 2024.'
            },
            // --- EXAMPLE ITEM 2 (REPLACE THIS) ---
            {
                id: 'my-second-project',
                thumbnailSrc: 'https://images.cargo.site/w/400/i/f6g7h8i9j0/another-thumbnail.png', // Replace with your URL
                imgSrcFull: 'https://images.cargo.site/w/1200/i/f6g7h8i9j0/another-fullsize-image.png', // Replace with your URL
                description: 'A photographic series exploring urban landscapes.'
            },
            // --- ADD AS MANY ITEMS AS YOU HAVE ---
            // You can copy and paste the structure above for each new item.
            // If you have fewer than 30 items, the gallery will only show what you provide.

            // --- The rest are placeholders for demonstration ---
            { id: 'demo3', thumbnailSrc: 'https://placehold.co/200x300/FFD700/fff?text=P3&font=inter', imgSrcFull: 'https://placehold.co/800x1200/FFD700/fff?text=P3&font=inter', description: 'This is Poster 3.' },
            { id: 'demo4', thumbnailSrc: 'https://placehold.co/200x300/FF69B4/fff?text=P4&font=inter', imgSrcFull: 'https://placehold.co/800x1200/FF69B4/fff?text=P4&font=inter', description: 'This is Poster 4.' },
            { id: 'demo5', thumbnailSrc: 'https://placehold.co/200x300/00BFFF/fff?text=P5&font=inter', imgSrcFull: 'https://placehold.co/800x1200/00BFFF/fff?text=P5&font=inter', description: 'This is Poster 5.' },
            { id: 'demo6', thumbnailSrc: 'https://placehold.co/200x300/FF4500/fff?text=P6&font=inter', imgSrcFull: 'https://placehold.co/800x1200/FF4500/fff?text=P6&font=inter', description: 'This is Poster 6.' },
        ];
        
        // ==============================================================================
        // === END OF EDITING SECTION ===================================================
        // ==============================================================================


        let isDragging = false;
        let dragStartX, dragStartY; 
        let currentX = 0, currentY = 0; 
        let targetX = 0, targetY = 0; 
        let scale = 0.01; 
        let targetScale = 0.01; 
        const minScale = 0.1; 
        const maxScale = 3;
        const zoomSensitivity = 0.0015; 
        const easingFactor = 0.08; 
        let clickStartPos = { x: 0, y: 0 }; 

        let initialAnimationDone = false;
        const initialTargetScale = 0.8; 
        const initialAnimationSpeedFactor = 0.03; 

        const posterWidth = 200;
        const posterHeight = 300;
        const gap = 80; 
        const numPosters = postersData.length;
        const itemsPerRow = Math.ceil(Math.sqrt(numPosters)); 
        const canvasContentWidth = itemsPerRow * (posterWidth + gap) - gap; 
        const canvasContentHeight = Math.ceil(numPosters / itemsPerRow) * (posterHeight + gap) - gap; 

        currentX = (viewport.offsetWidth / 2) - (canvasContentWidth / 2 * scale);
        currentY = (viewport.offsetHeight / 2) - (canvasContentHeight / 2 * scale);
        targetX = currentX;
        targetY = currentY;
        
        postersData.forEach((data, index) => {
            const posterElement = document.createElement('div');
            posterElement.classList.add('poster-item');
            
            const col = index % itemsPerRow;
            const row = Math.floor(index / itemsPerRow);
            
            posterElement.style.left = `${col * (posterWidth + gap)}px`;
            posterElement.style.top = `${row * (posterHeight + gap)}px`;

            const imgElement = document.createElement('img');
            imgElement.src = data.thumbnailSrc; // Use thumbnailSrc from your data
            imgElement.alt = data.description.substring(0, 30); // Use description for alt text
            imgElement.loading = 'lazy';
            imgElement.onerror = function() {
                this.src = `https://placehold.co/200x300/ccc/333?text=Error`;
            };
            
            posterElement.appendChild(imgElement);
            canvas.appendChild(posterElement);

            posterElement.addEventListener('click', (e) => {
                if (initialAnimationDone) { 
                    const distDragged = Math.sqrt(Math.pow(e.clientX - clickStartPos.x, 2) + Math.pow(e.clientY - clickStartPos.y, 2));
                    if (distDragged > 5) { 
                        return;
                    }

                    modalImage.src = data.imgSrcFull; // Use full image URL from your data
                    modalImage.onerror = function() {
                        this.src = `https://placehold.co/800x1200/ccc/333?text=Error`;
                    };
                    modalDescription.textContent = data.description; // Use description from your data
                    modalOverlay.style.display = 'flex';
                }
            });
        });
        
        function applyTransform() {
            canvas.style.transform = `translate(${currentX}px, ${currentY}px) scale(${scale})`;
        }
        
        function animationLoop() {
            if (!initialAnimationDone) {
                scale += (initialTargetScale - scale) * initialAnimationSpeedFactor;
                targetScale = scale; 

                currentX = (viewport.offsetWidth / 2) - (canvasContentWidth / 2 * scale);
                currentY = (viewport.offsetHeight / 2) - (canvasContentHeight / 2 * scale);
                targetX = currentX;
                targetY = currentY;

                if (Math.abs(scale - initialTargetScale) < 0.001) {
                    scale = initialTargetScale;
                    targetScale = initialTargetScale;
                    initialAnimationDone = true;
                    targetX = currentX = (viewport.offsetWidth / 2) - (canvasContentWidth / 2 * scale);
                    targetY = currentY = (viewport.offsetHeight / 2) - (canvasContentHeight / 2 * scale);
                }
            } else {
                currentX += (targetX - currentX) * easingFactor;
                currentY += (targetY - currentY) * easingFactor;
                scale += (targetScale - scale) * easingFactor;

                if (Math.abs(targetX - currentX) < 0.1) currentX = targetX;
                if (Math.abs(targetY - currentY) < 0.1) currentY = targetY;
                if (Math.abs(targetScale - scale) < 0.001) scale = targetScale;
            }

            applyTransform();
            requestAnimationFrame(animationLoop);
        }
        
        animationLoop(); 

        viewport.addEventListener('mousedown', (e) => {
            if (!initialAnimationDone) return; 
            isDragging = true;
            dragStartX = e.clientX; 
            dragStartY = e.clientY;
            clickStartPos = { x: e.clientX, y: e.clientY }; 
            viewport.style.cursor = 'grabbing';
        });

        viewport.addEventListener('mousemove', (e) => {
            if (!isDragging || !initialAnimationDone) return;
            e.preventDefault(); 
            
            const dx = e.clientX - dragStartX;
            const dy = e.clientY - dragStartY;

            targetX += dx;
            targetY += dy;
            
            dragStartX = e.clientX; 
            dragStartY = e.clientY;
        });

        const stopDragging = () => {
            if (isDragging) {
                isDragging = false;
                viewport.style.cursor = 'grab';
            }
        };
        viewport.addEventListener('mouseup', stopDragging);
        viewport.addEventListener('mouseleave', stopDragging); 

        viewport.addEventListener('wheel', (e) => {
            if (!initialAnimationDone) return; 
            e.preventDefault(); 

            const rect = viewport.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;

            const mouseCanvasX = (mouseX - currentX) / scale;
            const mouseCanvasY = (mouseY - currentY) / scale;
            
            const delta = e.deltaY * zoomSensitivity * -1; 
            let newScaleAttempt = targetScale + delta * targetScale; 
            newScaleAttempt = Math.max(minScale, Math.min(maxScale, newScaleAttempt));

            targetX = mouseX - mouseCanvasX * newScaleAttempt;
            targetY = mouseY - mouseCanvasY * newScaleAttempt;
            targetScale = newScaleAttempt; 
        });

        closeModalButton.addEventListener('click', () => {
            modalOverlay.style.display = 'none';
        });
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                modalOverlay.style.display = 'none';
            }
        });
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modalOverlay.style.display === 'flex') {
                modalOverlay.style.display = 'none';
            }
        });

    </script>-->


